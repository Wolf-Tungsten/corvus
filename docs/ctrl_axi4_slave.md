# 控制器 AXI4 Slave 接口

用于向处理器核心提供一段非缓存的、地址直接映射的控制器内存地址空间。

## Spec 说明

- 遵循 AXI4 协议，作为一个 AXI4 从设备
- 地址位宽 ABITS、数据位宽 DBITS 可配置为32或者64，其他值不允许
- 提供一段连续的地址空间，从0地址开始连续编排，按字节编址
    - 读状态区域：N_RS 个 DBITS 位宽数据组成，映射成 1 个 Vec(N_RS, UInt(DBITS.W)) 的控制器输入端口，外部逻辑驱动这个 Port，处理器核心可读取状态
    - 写状态区域：N_WS 个 DBITS 位宽数据组成，映射成 1 个 Vec(N_WS, UInt(DBITS.W)) 的控制器输出端口，处理器写入这个地址空间，外部逻辑即可读取状态
    - 读队列区域：N_RQ 个 DBITS 位宽数据组成，映射成 N_RQ 个 Flipped(Decoupled(UInt(DBITS.W))) 控制器端口，处理器每次读取这个空间，就会触发一次 fire；若端口上没有输入数据，则阻塞；约定这个空间的读取地址总是 DBITS / 8 地址对齐的，非对齐的读取不触发报错，而是舍弃低位按照对齐地址处理
    - 写队列区域：N_WQ 个 DBITS 位宽数据组成，映射成 N_WQ 个 Decoupled(UInt(DBITS.W)) 控制器端口，处理器每次写入这个空间，就会触发一次 fire；若控制器端口没准备输出数据，则阻塞；约定这个空间的读取地址总是 DBITS / 8 地址对齐的，不允许 strb。不合法的写入触发报错
- 超出地址范围的读写报错

